QSanguosha-Hegemony (QSGSH) Version 0.7.2 beta


  Change Log / Release Notes

0.8.0
-----------------------------
  Bugs Fixed:
  +选将框里不能选择的武将可以随便移动

  +AI可以选到没有分配到的武将

  +修复特定情况下，君主在场时该势力出现野心家的情况

  +修复特定情况下，玩家非法使用以逸待劳

  +按照《三国杀官方规则集》修改亮将流程
   （现在天义和邓艾拼点先屯田再亮太史慈，这不是BUG！是正确结算！）

  +修改了黄巾天兵符中对群雄人数增加的效果的实现，令其能在特定情况下部分转化为群雄人数

  API Changes:
  +更新VS2013和Qt5编译环境，删除VS2012编译文件

  +使用新的结构体表示版本号

  +根据最新规则，调整了角色失去牌与弃置的流程，同步改动礼让，章武以及系统洗牌

  +修改了急袭、弘法杀的操作，现在可以取消了

  +修改了资粮、千幻取消的操作

  +更新FMOD至v4.44.41

  +更新Breakpad至r1353

  +新增基类GraphicsBox来统一游戏内弹窗的格式

  +调用QtOpenGL改善UI

  +新增用-1表示距离不存在

  +修改队列与场上某势力玩家数的判断的接口

  +场上所有玩家可以看到诸葛亮的观星过程

  +新增LUA对json的支持

  New Features/Enhancements:
  +对界面进行了整体的大修改（只可意会，不可言传）

  +加入了新的限定技动画效果，和原来的感觉一点都不一样哦

  +重制所有游戏用图
   （强迫症表示开心极了）

  +禁表功能（测试）
   （注意双将禁表不宜加的过多，会导致屏幕上选将全都不可用）

  +对选将框的武将进行排序，同势力的武将在一起

  +加入了取消目标，移除武将的Emotion，加入了大量指示线动画

  +新增势备篇卡牌及其相关的界面和结算的改动并开放相关的lua接口

  +优化绝大部分技能的AI

  +优化准备阶段开始时的亮将AI

  +优化部分光环技能的亮将AI

  +新增电脑的选将AI，并优化AI的飞龙夺凤的复活选将

  +新增倾城AI

  +新增司马懿邓艾双将情况下，用手牌刷田的AI

  +新增卡牌编辑器的自动换行功能

  +新增小型场景（自定义场景）

  +新增守卫剑阁（根据《三国杀OL》同名模式改编）

  +修改电脑的名称

0.7.2 beta (June 2 2014)
-----------------------------
  Bugs Fixed:
  +天覆失效

  +多个技能的AI问题（目前AI问题还比较大）

  +内存严重泄露

  +Player::hasSkill()函数当中判断隐藏技能的问题

  +狂骨只回复1点体力

  +烈弓、铁骑新实现方法引起的闪电移动过程中闪退

  +突袭、巧变新实现方法导致选择到飞龙夺凤的时候以及判定时引起的牌卡住
  
  +阵法技按钮技能名为黑色
  
  +通过录像文件获知其他角色暗置武将
  
  +部分状态技无法亮将
  
  +部分技能按钮预亮后无法取消

  API Changes:
  +更改部分技能的底层实现（驱虎，天义，乱武，雄异）

  +LUA扩展包文件写法更换：由原来的module改为返回表
   （现在一个文件可以定义多个扩展包了！变量名也不用必须用extension了！一般人我不告诉他！）

  +新函数：QList<int> Room::getCardIdsOnTable(const Card *)
   用于获取正在结算当中的牌在处理区的部分
   
  +开放Windows x64平台下的编译
  
  +可以使用VS2012进行编译
 
  +可以试着使用Qt5进行编译了

  New Features/Enhancements:
  +新增加了许多电脑名字，均衡名字的出现次数

  +升级fmodex音频库至4.44.35

  +升级LUA为5.2.3，依然加入continue，但是删除了module

  +升级Qt基础库至4.8.6(release)/5.3.0(develop)

  +在AI延时为0时不显示觉醒动画

  +替换LUA君主将

  +替换董卓、君主张角的配音
   
  +优化五谷丰登AI
  
  +优化飞龙夺凤、太平要术AI
  
  +优化手牌右侧框大小
  
  +在选将框中提示座位号
  
  +优化董卓选将AI
  
  +单机游戏时，可设置为自动预亮
  
  +乱武设定延时
  
  +来源为三国杀OL的配音，不再标注为“官方”配音
  
  +性能大幅优化
  
  +未亮将的小乔可用黑桃牌发动天香，判定为黑桃时可展示小乔
  
  +新增可选规则：首亮奖励
  
  +新增测试功能：检查更新
  
  +根据最新规则，调整借刀杀人

0.7.1 alpha (April 10 2014)
-----------------------------
  Bugs Fixed:
  +天覆在技能失去之后依然可用

  +使用双雄决斗导致强制亮将

  +倾城暗置武将，性别不正常

  +飞龙夺凤的各种问题

  +牌永久卡在处理区的问题以及结算当中的牌从非处理区移动到弃牌堆

  +LUA视为技闪退

  API Changes:
  +针对多种hasSkill类函数加入了方便的重载函数

  +部分函数为了编写方便替换了参数的类型，多半是由传值变为传常量引用，或者由传常量值变为传常量引用等等。

  New Features/Enhancements:
  +AI对无懈可击国的选择

  +飞龙夺凤AI

  +离线使用托管AI

  +DIY编辑器的修改，现在可以制作国战卡牌了

  +由于官方修改了很多技能的结算，这里也同步修改

  +拼点的牌现在为两张同时移动
  

0.7.0 beta (April 1 2014)
-----------------------------
  Bugs Fixed:
  +AI不发动屯田

  +尚义可以选自己做目标

  +AI用弃牌堆中的牌放权

  +魂殇获得的英魂无法使用

  +君主刘备在场，黄忠未明置预亮烈弓后，攻击范围增加

  +暗将会被围攻

  +AI邹氏倾城副将为周泰的角色的主将

  +死亡后的角色依然拥有鹤翼

  +双暗群雄可以发动弘法出杀

  +邓艾屯田判定非红桃，无法将判定牌置于武将牌上

  +最小化到系统托盘后不显示程序图标

  +询问勇决拥有者是否发动技能，而不是使用杀的角色

  +未亮出的锁定技在多个同时机技能顺序询问时不可取消发动

  +自己的主将被横置

  +与暗将势力相同的角色数不为0

  +天妒可获得已不处于处理区的判定牌

  +使用不属于自己的牌，卡牌移动的来源是使用者

  +没有与野心家同势力的角色

  +点击查看移出游戏的牌时，确认键需要反复点击

  +飞龙夺凤复活后没有限定技标记

  +AI对装备防具的角色发动护援，将白银狮子置入其装备区

  +AI手牌大量溢出时，不发动巧变跳过弃牌阶段

  +谦逊台词重复播放

  +飞龙夺凤复活目标后可以发动造成伤害后可触发的技能

  +lua扩展包技能禁止弃置造成度势无法正常使用

  +孔融在场时固政会获得一些莫名奇妙的牌

  +发动双雄后，回合结束时双雄按钮消失

  +双雄按钮在被断肠下立即消失

  API Changes:
  +修复lua主将技/副将技无效的问题

  +开放添加自定义势力的UI接口，自定义势力功能到此已开放完毕

  +新增LuaAttackRangeSkill, 可以锁定或调整攻击范围

  +调整底层关于锁定手牌上限的实现，多技能锁定手牌上限时，以数值最高的为准

  +修复ServerPlayer::inSiegeRelation底层实现中暗将也会视为被围攻的问题

  +修复Room::_moveCards底层实现中交换装备更新问题

  +LUA扩展包的AI文件改为放入"extensions/ai/"以方便玩家移除（原文件夹不再可以放置LUA扩展包AI）

  +触发技can_preshow缺省时，技能有视为技部分不可预亮，反之可预亮

  +移除冗余的Engine::getLords, Engine::getRandomLords, Engine::banRandomGods

  +移除Room::getLord的默认参数值

  +修改Player::getPlayerNumWithSameKingdom底层实现，若对象未明置武将，返回0

  +DamageStruct新增属性transfer_reason(QString类型，用以记录伤害被转移的原因，如"tianxiang"), prevented(bool，用以记录伤害是否被防止)

  +更新lua扩展包帮助文档OtherSkill和SkillCard中部分内容

  +修改Player::hasShownSkill底层实现，考虑装备技能和隐藏技能

  +新增时机TargetChoosing 和 TargetChosen，用以区分选择目标与指定目标

  +新增sgs.getMappedRole，用以获取势力对应的身份

  +关闭Room::changeHero接口

  +移除Room::hasWelfare

  +升级lua middleclass对象库至最新(3.0.1)(from github.com/kikito/middleclass)感谢kikito及其团队的开发与维护

  +添加通用Log模板 #DanlaoAvoid

  +TriggerSkill大修改，LUA的can_trigger修改，on_cost与on_effect变为6参数

  New Features/Enhancements:
  +战报窗口增加边框

  +使用清晰度更高的曹洪、陆逊、邹氏卡牌

  +崩溃后询问是否立即上传dmp文件给程序维护人员（感谢T?kés Attila及其团队的协助开发）

  +移除暗置武将前先明置

  +AI对中立角色发动穿心

  +完善千幻技能询问提示，以便于区分不同状况

  +失去飞影效果时，不显示战报提示

  +AI周泰选择弃不屈牌时，禁用AI延时，以保证游戏流畅

  +"展示武将"统一规范为"明置武将"

  +配置对话框中，起始页设为"环境"

  +技能描述中提示技能是否可预亮

  +放缓AI亮将的节奏

  +着手优化程序性能

  +显示所有珠联璧合关系，不论扩展包是否禁用

  +升级freetype字体渲染库至最新版(2.5.3)(from www.freetype.org)感谢freetype开发团队

  +"关于我们"对话框中的悬浮文字背景色设为白色，易于识别

  +即使禁止聊天，也可以在聊天框输入作弊码

  +调整君刘备在场时飞龙夺凤的AI价值

  +移除替换武将的作弊功能

  +添加卡牌及武将替换的选项

  +选将时右击卡牌换将

  +预置更多AI昵称

  +添加返回起始界面的按钮

  +队友有勇决时，AI优先使用杀

  +加入AI武将筛选功能，现在可以通过ai-selector/pair-value.txt里设置每组武将的评分了
  
  +卡牌编辑器加入抗锯齿


0.6.0 beta (February 25 2014)
-----------------------------
  Bugs Fixed:
  +勇决结算有误

  +君刘备+卧龙无限飞龙夺凤无懈

  +曹洪阵亡后，队友的飞影依然有效

  +弘法打出杀卡住

  +录像不能回放

  +服务器信息中扩展包状态重复显示

  +AI倾城随机暗置武将牌

  +AI对陆逊使用乐不思蜀

  +已亮邹氏回合内暗置卧龙可以发动看破

  +涅槃和激诏可以同时发动

  +护援锁定拆牌

  +阶段跳过后依然可以发动巧变跳过该阶段

  +无懈可击·国被取消后的结算有误

  +一场游戏结束后点击武将一览时崩溃

  +AI一张卡牌不断弃置

  +倾城暗置君主或者士兵

  API Changes:
  +修复lua技能卡不能亮将的问题

  +更新lua扩展包帮助文档SkillGeneral,ViewAsSkill,TriggerSkill及SkillCard部分内容，新增章节OtherSkill

  New Features/Enhancements:
  +没有建立服务器时，禁止IP对话框加入一个提示

  +新增AI享乐亮将策略

  +调整AI节命策略，不再对同一角色使用多次节命

  +调整AI忘隙策略，对不需要空手牌的队友发动忘隙

  +调整AI敌对关系判断策略

  +调整AI天妒策略：当判定牌为屯田判定时，不获得判定牌

  +调整AI被刚烈策略：手牌有桃选择受到伤害

  +调整AI雄异策略：如果自己已亮主将董卓，出牌阶段立即发动雄异

  +删除身份分配表

  +录像文件后缀名更改为"qsgs"

  +优化AI铁索连环使用策略

  +优化AI火攻使用策略

  +调整AI策略：减少弃置邓艾防具的几率

  +调整AI策略：如队友闪电判定为黑桃2-9，将可能用桃改判

  +提升AI智商：知道发动好施会额外摸两张牌

  +调整AI策略：如果邓艾为盟友，董卓发动横征的几率微升

  +调整AI策略：发动雄异拯救濒危队友

  +调整AI策略：微降赵云囤积基本牌的概率

  +调整AI策略：不对手牌数不小于2的邓艾使用突袭

  +调整AI策略：当自己有防具有闪时，残血不自杀

  +调整AI策略：考虑对盟友邓艾使用英魂，不对敌对邓艾使用英魂

  +调整AI策略：增加指定队友邓艾为缔盟目标之一的概率

  +调整AI策略：丁奉无法使用杀时，不发动奋迅

  +调整AI策略：非敌对邓艾回合，不选择对邓艾发动寒冰剑特效

  +调整AI策略：不对敌对邓艾使用借刀杀人

  +提升AI智商：学会重铸知己知彼

  +将最大选将上限控制在7，防止10人局武将不够

  +增加太平要术防止伤害时的动画

  +开放自定义悬浮文字颜色及其背景色、一览中文字颜色的设置

  +调整AI策略：飞龙夺凤询问是否另目标弃牌进行势力判断

  +增补享乐杀无效时战报的汉语翻译及询问弃牌时的汉语翻译

  +增补AI策略：鹰扬的发动

  +增补崩坏选项的汉语翻译

  +优化无双AI关于决斗的亮将时机

  +调整触发技结算模式，技能逐个执行，不再拆分

  +所有卡牌因利用锁定技而突破距离、目标数及使用次数限制均立即亮出相关武将；相关武将无须在准备阶段亮将即可获得锁定效果

  +奋命弃自己的牌不再需要点击对话框

  +调整AI策略：敌方有君刘备且自身没有枭姬则不装备飞龙夺凤

  +优化AI准备阶段的亮将策略

  +优化张任、周瑜、小乔卡牌图片

  +“关于我们”中添加两个热门的神杀·国战联机群快速链接及二维码

  +客户端与服务器版本不一致时提供可用的下载地址


0.5.1 beta (February 16 2014)
-----------------------------
  Bugs Fixed:
  +修复一局游戏结束后游戏崩溃的问题

  +替换仅有的某势力武将后，换出来的武将不能选择

  +AI发动制衡，弃置超过其体力上限数量的牌

  +自动保存录像不会自动创建路径

  +飞龙夺凤复活后选将要选两个，并且崩溃；暗将可以发动飞龙夺凤复活效果

  +用几张牌后存嗣自己，出杀可用勇决收回；勇决的杀被取消，杀置入弃牌堆

  +鸩毒的酒被千幻取消后，依然有效

  +君张角没有天兵牌，群势力角色在出杀响应中弘法可用

  +取消延时锦囊效果造成崩溃

  +不可以拿手牌中的八卦阵发动技能

  +重复播放随势配音；双暗田丰可以亮将发动随势

  New Features/Enhancements:
  +在黑色技能描述下衬以白色背景，避免看不清

  +选将时，主将进入主将框后，仅与主将存在珠联璧合关系的武将显示珠联璧合字样

  +武将牌上有不屈牌的AI回血，弃不屈牌中点数相同的牌

  +非手牌面板上的阴阳鱼加上黑色背景，以免受伤的阴阳鱼难以辨识

  +移除暂时无法使用的禁表按钮

  +AI发动倾城，暗置有不屈牌的明将周泰，出杀前暗置有卖血技能的武将

  +AI恢复观星的智商

  +开局若存在君主，且均为同势力武将，直接结束游戏

  +未明置徐晃，可以对距离为2的角色使用兵粮寸断

  +AI不对明置的陆逊使用乐不思蜀

  +未明置所有武将的AI不以造成伤害为目的对孔融出杀

  +更新观星、五谷框样式，使其与选将框一致；将观看牌的框关闭按钮放大为确认按钮，方便点击

  +游戏结束后页面势力栏显示野心家；在结束页面中增加显示势力图标

  +更正蔡文姬描述，更改蔡文姬台词中的错别字

  +显示主副将武将名

  +简易断肠AI策略

  +AI主动使用礼让

  +AI识别被飞龙夺凤复活的同势力武将为队友

  +AI被邹氏暗置后，在邹氏回合外主动明置发动技能

  +暗置的状态锁定技不生效

  +触发珠联璧合时动画提示

  +暗置黄月英在对距离超过1的角色使用顺手牵羊、兵粮寸断后立即亮将

  +将版本号加入窗口标题


0.5.0 beta (February 14 2014)
-----------------------------
  Initial Public Release